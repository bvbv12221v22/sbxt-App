<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
	</head>
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		<h1 class="mui-title">添加施肥品种及方法</h1>
	</header>
	<div class="mui-content">
		<ul class="mui-table-view" id="clist">
			<form class="mui-input-group">
				<div class="mui-input-row">
					<label>肥料种类及方法1：</label>
					<input id="manure1" class="manure" type="text" style="width: 27%;float: none;" />
				</div>
				<div class="mui-input-row">
					<label>肥料种类及方法2：</label>
					<input id="manure2" class="manure" type="text" style="width: 27%;float: none;" />
				</div>
				<div class="mui-input-row">
					<label>肥料种类及方法3：</label>
					<input id="manure3" class="manure" type="text" style="width: 27%;float: none;" />
				</div>
				<div class="mui-input-row">
					<label>肥料种类及方法4：</label>
					<input id="manure4" class="manure" type="text" style="width: 27%;float: none;" />
				</div>
			</from>
		</ul>
	</div>
	<button id="addVar" class="mui-btn mui-btn-green" style="width: 200px; margin-left: 20px; margin-top: 20px;margin-bottom: 20px;">添加肥料种类及方法</button>
	<button id='setOver' type="button" class="mui-btn mui-btn-block mui-btn-red">设定完成</button>
	<body>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/app.js" type="text/javascript" charset="utf-8"></script>
		<script>
			(function($, doc) {
				$.init();
				app.initOpenWindow();
				$.plusReady(function() {
					var manNum = 4;var manArr=[];var currentData;
					//点击添加品种按钮后，自动向下添加输入框
					document.getElementById("addVar").addEventListener('tap', function() {
						manNum++;
						var mans = document.querySelectorAll(".mui-input-row");
						console.log(mans.length);
						var start = mans[mans.length];
						var lableTap = app.createElement('label',{innerHTML: "肥料种类及方法"+manNum+":"});
						console.log("肥料种类及方法："+manNum)
						var inputTag = app.createElement('input',{
							attrs:{
								id:"var"+manNum,
								type:"text"
							},
							className:"manure"
						});
						var divTag = app.createElement('div',{
							className:"mui-input-row"
						});
						divTag.appendChild(lableTap);
						divTag.appendChild(inputTag);
						mans[3].parentElement.insertBefore(divTag,start);
					});
					document.getElementById('setOver').addEventListener('tap',function(){
						manArr=[];
						console.log("ok");
						var manData = document.querySelectorAll('.manure');
						for(var i = 0; i < manData.length; i++){
							var ipValue = manData[i].value.trim();
							if(ipValue){
								manArr.push(ipValue);
								console.log("value:"+ipValue);
							}
						}
						if(!manArr.length>0){
							mui.alert("至少添加一个肥料种类及方法","添加施肥种类及方法");
							return false;
						}
						currentData = manArr;
						if(currentData) {
							app.pageInteraction.injection(currentData); //页面回传数据
						} else {
							mui.alert("至少添加一个肥料种类及方法","添加施肥种类及方法");
						}
					});
				});
			}(mui, document));
		</script>
	</body> 

</html> 